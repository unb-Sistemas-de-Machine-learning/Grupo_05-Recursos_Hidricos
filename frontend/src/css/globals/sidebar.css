/* ====== AguaPrev Sidebar (ajuste final alinhamento rodapé) ====== */
:root{
  --ap-sb-w-expanded: 18rem;
  --ap-sb-w-collapsed: 5rem;
  --ap-ctrl-size: 44px;
  --ap-sb-radius: .75rem;
  --ap-sb-border: 1px solid rgba(255,255,255,.10);
  --ap-sb-border-light: 1px solid rgba(0,0,0,.06);
  --ap-sb-bg: rgba(12,26,42,.90);
  --ap-ink: #031E21;
}

/* ===== Perfil ===== */
.sb-profile { align-items: center; overflow: hidden; }            /* ⬅ evita vazamento do conteúdo */
#sb-profile { overflow: hidden; }                                  /* ⬅ garante que o bloco não “sangre” */
#ap-sidebar[data-collapsed="true"] #sb-profile,
#ap-sidebar.collapsed #sb-profile {
  padding-inline: .5rem;
}
#ap-sidebar[data-collapsed="true"] #sb-profile [data-sb-label],
#ap-sidebar.collapsed #sb-profile [data-sb-label] {
  display: none !important;
}
#ap-sidebar[data-collapsed="true"] #sb-profile-btn,
#ap-sidebar.collapsed #sb-profile-btn {
  width: var(--ap-ctrl-size);
  height: var(--ap-ctrl-size);
  min-width: var(--ap-ctrl-size);
  padding: 0;
  justify-content: center;
}

/* ===== Seções / Links ===== */
.sb-section{ margin:10px 8px 6px; color:#7e8da0; font-size:.75rem; font-weight:600; letter-spacing:.04em; text-transform:uppercase; }

.sb-link{
  position:relative;
  display:flex; align-items:center; gap:.625rem;
  padding:.625rem .625rem; border-radius:.75rem;
  color:#0C1A2A; text-decoration:none; border:1px solid transparent;
  transition: background .15s ease, border-color .15s ease, color .15s ease;
}
.dark .sb-link{ color:#eaf3ff; }                                   /* ⬅ links/ícones brancos no dark */
.sb-link:hover{ background:rgba(0,0,0,.04); border-color:rgba(0,0,0,.06); }
.dark .sb-link:hover{ background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.12); }
.sb-link:focus-visible{ outline:2px solid color-mix(in srgb, #0A5C67 70%, transparent); outline-offset:2px; }
.sb-ico{ width:20px; height:20px; opacity:.95; }

/* Todos SVGs herdam a cor do link/botão */
#ap-sidebar .sb-link .sb-ico,
#ap-sidebar .sb-ctrl svg,
#ap-sidebar .sb-section svg { stroke: currentColor; }

/* ===== Badge (alertas) ===== */
.sb-badge{
  margin-left:auto;
  min-width:18px; height:18px; line-height:18px;
  padding:0 6px; border-radius:9999px;
  font-size:.70rem; font-weight:700; text-align:center;
  color:#fff; background:#E8611D;
}
#ap-sidebar[data-collapsed="true"] .sb-link .sb-badge,
#ap-sidebar.collapsed .sb-link .sb-badge{
  position:absolute;
  right:-2px; top:50%;
  transform:translate(50%,-50%);
  box-shadow:0 0 0 2px rgba(12,26,42,.85);
}

/* ===== Controles ===== */
.sb-ctrl{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.5rem .625rem; border-radius:.75rem;
  border:1px solid rgba(0,0,0,.06);
  background: color-mix(in srgb, #ffffff 84%, transparent);
  color: var(--ap-ink);
  transition: background .15s ease, border-color .15s ease, color .15s ease, transform .06s ease, box-shadow .15s ease;
}
.dark .sb-ctrl{
  border:1px solid rgba(255,255,255,.10);
  background: color-mix(in srgb, #0C1A2A 80%, transparent);
  color:#eaf3ff;                                                   /* ⬅ textos e ícones brancos no dark */
}
.sb-ctrl svg{ stroke:currentColor; }
.sb-ctrl:hover{ background: color-mix(in srgb, #ffffff 90%, transparent); box-shadow:0 6px 20px -8px rgba(0,0,0,.35); }
.dark .sb-ctrl:hover{ background: color-mix(in srgb, #0C1A2A 88%, transparent); box-shadow:0 8px 24px -10px rgba(0,0,0,.6); }
.sb-ctrl:active{ transform: translateY(1px); }

/* ===== Dropdown ===== */
.sb-dropdown{ will-change: transform; }
.sb-dropdown.up{ top:auto !important; bottom:calc(100% + .5rem) !important; }
.sb-dropdown.down{ bottom:auto !important; top:calc(100% + .5rem) !important; }
.sb-dd-item{ display:block; width:100%; text-align:left; padding:.625rem .75rem; background:transparent; border:0; cursor:pointer; color:inherit; }
.sb-dd-item:hover{ background: color-mix(in srgb, #000 6%, transparent); }
.dark .sb-dd-item:hover{ background: color-mix(in srgb, #fff 10%, transparent); }

/* ===== Tooltips dos links (colapsado) ===== */
a.sb-link[data-tooltip]{ position:relative; }
#ap-sidebar[data-collapsed="true"] a.sb-link[data-tooltip]:hover::after,
#ap-sidebar.collapsed a.sb-link[data-tooltip]:hover::after{
  content: attr(data-tooltip);
  position:absolute; left:calc(100% + 8px); top:50%; transform:translateY(-50%);
  background: var(--ap-sb-bg); color:#eaf3ff; border: var(--ap-sb-border);
  padding:.35rem .5rem; border-radius:.5rem; font-size:.75rem; white-space:nowrap; z-index:70;
}

/* ===== Largura/Overflow ===== */
#ap-sidebar{
  width: var(--ap-sb-w-expanded);
  transition: width .22s ease;
  overflow: hidden;                                                /* ⬅ era visible; evita overflow no topo */
}
#ap-sidebar[data-collapsed="true"], #ap-sidebar.collapsed{ width: var(--ap-sb-w-collapsed); }

/* Esconde labels e “PT-BR” no colapsado */
#ap-sidebar[data-collapsed="true"] [data-sb-label],
#ap-sidebar.collapsed [data-sb-label],
#ap-sidebar[data-collapsed="true"] #lang-current,
#ap-sidebar.collapsed #lang-current{ display:none !important; }

/* Logos alternadas */
#ap-sidebar #sb-logo-expanded{ display:block; }
#ap-sidebar #sb-logo-collapsed{ display:none; }
#ap-sidebar[data-collapsed="true"] #sb-logo-expanded,
#ap-sidebar.collapsed #sb-logo-expanded{ display:none; }
#ap-sidebar[data-collapsed="true"] #sb-logo-collapsed,
#ap-sidebar.collapsed #sb-logo-collapsed{ display:block; }

/* Centraliza links no colapsado */
#ap-sidebar[data-collapsed="true"] .sb-link,
#ap-sidebar.collapsed .sb-link{ justify-content:center; padding:.625rem; }

/* ===== Rodapé no colapsado ===== */
#ap-sidebar[data-collapsed="true"] .ap-footer-row,
#ap-sidebar.collapsed .ap-footer-row{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:.75rem;
  margin-top:auto;
  margin-bottom:.5rem;
}

/* Botões 44x44 */
#ap-sidebar[data-collapsed="true"] .sb-ctrl,
#ap-sidebar.collapsed .sb-ctrl{
  width:var(--ap-ctrl-size);
  height:var(--ap-ctrl-size);
  min-width:var(--ap-ctrl-size);
  padding:0;
  justify-content:center;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(4px);
}

/* Ícones centralizados */
#ap-sidebar[data-collapsed="true"] .sb-ctrl svg,
#ap-sidebar.collapsed .sb-ctrl svg{
  margin:0 !important;
  display:block;
}

/* Remove labels/chevron/avatar no colapsado e mostra o “pessoinha” */
#ap-sidebar[data-collapsed="true"] #account-toggle span,
#ap-sidebar.collapsed #account-toggle span,
#ap-sidebar[data-collapsed="true"] #account-toggle img,
#ap-sidebar.collapsed #account-toggle img,
#ap-sidebar[data-collapsed="true"] #account-toggle svg:last-child,
#ap-sidebar.collapsed #account-toggle svg:last-child{
  display:none !important;
}
#ap-sidebar[data-collapsed="true"] #account-toggle .sb-ico-collapsed,
#ap-sidebar.collapsed #account-toggle .sb-ico-collapsed{
  display:inline-block !important;
}

/* Tooltips dos controles (usa title) */
#ap-sidebar[data-collapsed="true"] .sb-ctrl:hover::after,
#ap-sidebar.collapsed .sb-ctrl:hover::after{
  position:absolute; left:calc(100% + 8px); top:50%; transform:translateY(-50%);
  background:rgba(12,26,42,.96); color:#fff; padding:.25rem .5rem; border-radius:.5rem;
  font-size:.75rem; white-space:nowrap; content:attr(title); z-index:70;
}

/* ===== Popover ===== */
#sb-popover{ max-height:60vh; overflow:auto; border-radius:.75rem; z-index:70; }
#sb-popover-scrim{ position:fixed; inset:0; z-index:60; background:rgba(0,0,0,.25); -webkit-backdrop-filter: blur(1px); backdrop-filter: blur(1px); }
.hidden{ display:none !important; }

/* Scrollbar */
#ap-sidebar nav::-webkit-scrollbar{ width:8px; }
#ap-sidebar nav::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.12); border-radius:8px; }
.dark #ap-sidebar nav::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); }
